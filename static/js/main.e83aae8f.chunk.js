(this.webpackJsonpDeepDarkDungeon=this.webpackJsonpDeepDarkDungeon||[]).push([[0],{20:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(7),c=n.n(r),i=(n(20),n(3)),s=n(36),o=(n(27),"Right"),l="Left",u="Down",d="Up",h=32,j=(n(28),n(0));function b(e){var t=e.cell,n=e.cellColumn;return Object(j.jsx)("td",{className:function(e){switch(e){case 1:return"wall";case 2:return"player";case 3:return"mob";default:return"tunnel"}}(t),children:" "},n)}function f(){var e=Object(i.c)((function(e){return e.map.map}));return Object(j.jsx)("div",{className:"map-container",children:Object(j.jsx)("table",{className:"grid nes-container is-dark",children:Object(j.jsx)("thead",{children:e.map((function(e,t){return Object(j.jsx)("tr",{children:e.map((function(e,t){return Object(j.jsx)(b,{cell:e,cellColumn:t},t)}))},t)}))})})})}function m(e){var t=e.map.player.fightingWith;return e.map.mobs.find((function(e){return e.id===t}))}function O(e){return e.map.player}n(30);var p=function(){var e=Object(i.c)(O);return Object(j.jsxs)("div",{className:"UI-container",children:[Object(j.jsxs)("div",{className:"stats-container nes-container is-dark with-title",children:[Object(j.jsx)("p",{className:"title",children:"Statistics"}),Object(j.jsxs)("tbody",{className:"nes-table is-dark",children:[Object(j.jsxs)("tr",{className:"hp",children:[" ",Object(j.jsx)("th",{children:"HP "}),Object(j.jsx)("th",{children:e.health}),"  "]}),Object(j.jsxs)("tr",{className:"ad",children:[" ",Object(j.jsx)("th",{children:"AD "}),Object(j.jsx)("th",{children:e.dmg})," "]}),Object(j.jsxs)("tr",{className:"gc",children:[" ",Object(j.jsx)("th",{children:"GC "}),Object(j.jsx)("th",{children:e.score})," "]})]})]}),Object(j.jsx)("div",{className:"game-container",children:Object(j.jsx)(f,{})}),Object(j.jsx)("div",{className:"inventory-container nes-container is-dark with-title",children:Object(j.jsx)("p",{className:"title",children:"Inventory"})}),Object(j.jsxs)("div",{className:"dialog-container nes-container is-dark with-title",children:[Object(j.jsx)("p",{className:"title",children:"Dialogs and quests"}),Object(j.jsx)("p",{children:"Work In Progress"})]}),Object(j.jsx)("div",{className:"character-container nes-container is-dark"}),Object(j.jsx)("div",{className:"tips-container nes-container is-dark"})]})},y=n(6),x=n.p+"static/media/Step.c2439e20.mp3",v=n.p+"static/media/FightSound.34398866.mp3",g=n.p+"static/media/OpenPotion.00a24de6.mp3",N=n.p+"static/media/DrinkPotion.6913b4bd.mp3",w=n.p+"static/media/Leaving-For-Valhalla(AlexanderNakarada).5b4d6299.mp3";function k(){return Object(a.useRef)(null)}var M=function(){clearTimeout(k.current),k.current=setTimeout((function(){new Audio(x).play()}),100)};function D(){var e=Object(a.useState)(!0),t=Object(y.a)(e,2),n=t[0],r=t[1];return Object(j.jsxs)("div",{className:"header nes-container is-dark with-title",children:[Object(j.jsx)("p",{className:"title",children:"ReactReduxRPG"}),Object(j.jsx)("p",{children:"Good luck, Stranger."}),Object(j.jsx)("button",{type:"button",className:"nes-btn "+function(e){return e?"is-normal":"is-disabled"}(n),disabled:!n,onClick:function(){new Audio(w).play(),r(!n)},children:"Music"})]})}var A="MOVE_CH",E="FIGHT_ACTION",T="DEFEND_ACTION",C="RESET",I="NEXT_LEVEL",R="ATTACK",P="DEFEND",L=2,S=1,W=0;n(31),n(13);function _(){var e=Object(i.c)(m),t=Object(i.b)(),n=Object(i.c)(O),r=Object(a.useState)(!0),c=Object(y.a)(r,2),s=c[0],o=c[1],l=Object(a.useState)(!0),u=Object(y.a)(l,2),d=u[0],h=u[1];return Object(j.jsxs)("div",{className:"fhtWindow",children:[Object(j.jsx)("button",{type:"button",className:"nes-btn is-primary",disabled:!d,onClick:function(){t({type:"FIGHT_ACTION",payload:R}),new Audio(v).play(),h(!d),setTimeout((function(){h(d)}),500)},children:"Attack"}),Object(j.jsx)("button",{type:"button",className:"nes-btn "+function(e){return e?"is-normal":"is-disabled"}(s),disabled:!s,onClick:function(){t({type:"DEFEND_ACTION",payload:P}),o(!s),new Audio(g).play(),setTimeout((function(){new Audio(N).play()}),100)},children:"Drink Healing Potion"}),Object(j.jsx)("br",{}),Object(j.jsxs)("span",{className:"nes-text is-disabled",children:["Enemy HP:",e.health," DMG:2"]}),Object(j.jsx)("br",{}),Object(j.jsxs)("span",{className:"nes-text is-disabled",children:["PLayer HP:",n.health," DMG:",n.dmg]})]})}n(32);function F(){var e=Object(i.b)();return Object(j.jsx)("div",{className:"gameOver",children:Object(j.jsxs)("button",{type:"button",className:"nes-btn is-error",onClick:function(){return e({type:C})},children:["Restart"," "]})})}n(33);var G=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.map.status})),n=["\u0446","w","W","ArrowUp"],a=["\u044b","s","S","ArrowDown"],r=["\u0444","a","A","ArrowLeft"],c=["\u0432","d","D","ArrowRight"];return Object(s.a)((function(e){return n.includes(e.key)}),(function(){e({type:A,payload:d}),M()})),Object(s.a)((function(e){return a.includes(e.key)}),(function(){e({type:A,payload:u}),M()})),Object(s.a)((function(e){return r.includes(e.key)}),(function(){e({type:A,payload:l}),M()})),Object(s.a)((function(e){return c.includes(e.key)}),(function(){e({type:A,payload:o}),M()})),Object(j.jsxs)("body",{className:"window",children:[Object(j.jsx)(D,{}),Object(j.jsx)(p,{}),t===W&&Object(j.jsx)(F,{}),t===S&&Object(j.jsx)(_,{})]})},H=n(12),U=n(2),V=n(11),B=n(10),J=n(15);function Y(e,t){for(var n=[],a=0;a<t;a++){n.push([]);for(var r=0;r<t;r++)n[a].push(e)}return n}function q(){for(var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:150,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r=Y(1,t),c=Math.floor(Math.random()*t),i=Math.floor(Math.random()*t),s=[[-1,0],[1,0],[0,-1],[0,1]],o=[];n&&t&&a;){do{e=s[Math.floor(Math.random()*s.length)]}while(e[0]===-o[0]&&e[1]===-o[1]||e[0]===o[0]&&e[1]===o[1]);for(var l=Math.ceil(Math.random()*a),u=0;u<l&&!(0===c&&-1===e[0]||0===i&&-1===e[1]||c===t-1&&1===e[0]||i===t-1&&1===e[1]);)r[c][i]=0,c+=e[0],i+=e[1],u++;u&&(o=e,n--)}return r}var K={player:{tile:"PLAYER_TILE",healthRegen:10+Math.floor(30*Math.random()),health:20,dmg:4,score:0,fightingWith:null},enemy:{tile:"ENEMY_TILE",id:0,health:20,dmg:0}},X=ce(),z={map:function(e){for(var t=te(e),n=0;n<X.length;n++)t=se(t,X[n]);return t}(q()),player:K.player,status:L,mobs:X};function Q(e,t){var n=re(e),a=$(n),r=ee(a,t);return function(e,t){return t.x>=h||t.x<0||t.y>=h||t.y<0||1===e[t.x][t.y]}(n,r)||(n[a.x][a.y]=0,n[r.x][r.y]=2),n}function Z(e,t){var n=ee($(e.map),t);if(function(e,t){return t.x>=h||t.x<0||t.y>=h||t.y<0||3===e[t.x][t.y]}(e.map,n))return function(e,t){console.log(e.mobs);var n,a=Object(B.a)(e.mobs);try{for(a.s();!(n=a.n()).done;){var r=n.value;if(r.x===t.x&&r.y===t.y)return r.id}}catch(c){a.e(c)}finally{a.f()}}(e,n)}function $(e){for(var t,n,a=0;a<e.length;a++)for(var r=0;r<e[a].length;r++)if(2===e[a][r]){t=a,n=r;break}return{x:t,y:n}}function ee(e,t){switch(t){case d:return{x:e.x-1,y:e.y};case u:return{x:e.x+1,y:e.y};case l:return{x:e.x,y:e.y-1};case o:return{x:e.x,y:e.y+1};default:return e}}function te(e){var t,n,a=re(e),r=!1;do{t=ae(0,h),n=ae(0,h),1!==a[t][n]&&(r=!0)}while(!r);return a[t][n]=2,a}function ne(){var e=ce(),t=q();t=te(t);var n,a=Object(B.a)(e);try{for(a.s();!(n=a.n()).done;){var r=n.value,c=oe(t),i=c.x,s=c.y;t[i][s]=3,r.x=i,r.y=s}}catch(o){a.e(o)}finally{a.f()}return{mobs:e,map:t}}function ae(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h;return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e}function re(e){for(var t=Object(V.a)(e),n=0;n<t.length;n++)t[n]=Object(V.a)(t[n]);return t}function ce(){for(var e=[],t=ie(2,5),n=0;n<t;n++)e.push({id:Object(J.a)(),health:Math.floor(26*Math.random()),dmg:Math.floor(4*Math.random()+1)});return e}function ie(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}function se(e,t){var n,a,r=re(e),c=!1;do{n=ae(0,h),a=ae(0,h),0===r[n][a]&&(c=!0)}while(!c);return r[n][a]=3,t.x=n,t.y=a,r}function oe(e){var t,n,a=re(e),r=!1;do{t=ae(0,h),n=ae(0,h),0===a[t][n]&&(r=!0)}while(!r);return{x:t,y:n}}var le=Object(H.a)({map:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:if(e.status!==L)return e;var n=Z(e,t.payload);return n?Object(U.a)(Object(U.a)({},e),{},{status:S,player:Object(U.a)(Object(U.a)({},e.player),{},{fightingWith:n})}):Object(U.a)(Object(U.a)({},e),{},{map:Q(e.map,t.payload)});case E:if(e.status!==S)return e;var a,r=e.mobs.map((function(t){return t.id===e.player.fightingWith?t.health>e.player.dmg?Object(U.a)(Object(U.a)({},t),{},{health:t.health-e.player.dmg}):(a=t,!1):t})).filter(Boolean);if(0===r.length){var c=ne();return Object(U.a)(Object(U.a)({},e),{},{mobs:c.mobs,map:c.map,status:L})}if(a){var i=re(e.map);return i[a.x][a.y]=0,Object(U.a)(Object(U.a)({},e),{},{map:i,mobs:r,player:Object(U.a)(Object(U.a)({},e.player),{},{fightingWith:null,score:e.player.score+ie(1,25)}),status:L})}return e.player.health-K.enemy.dmg<=0?Object(U.a)(Object(U.a)({},e),{},{status:W}):Object(U.a)(Object(U.a)({},e),{},{mobs:r,player:Object(U.a)(Object(U.a)({},e.player),{},{health:e.player.health-K.enemy.dmg})});case T:return e.status!==S?e:Object(U.a)(Object(U.a)({},e),{},{player:Object(U.a)(Object(U.a)({},e.player),{},{health:e.player.health+e.player.healthRegen})});case I:return e;case C:return z;default:return e}}}),ue=Object(H.b)(le);c.a.render(Object(j.jsx)(i.a,{store:ue,children:Object(j.jsx)(G,{})}),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.e83aae8f.chunk.js.map